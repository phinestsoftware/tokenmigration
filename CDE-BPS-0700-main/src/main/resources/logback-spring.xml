<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <include resource="org/springframework/boot/logging/logback/defaults.xml" />
    <include resource="org/springframework/boot/logging/logback/console-appender.xml"/>
    
    <property name="LOGDIR" value="/pkg/bps/logs"/>
    <!-- ===================================================================== -->
    <!-- CONSOLE                                                                -->
    <!-- ===================================================================== -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d [%-25t] [%-3L] [%-5p] %-20c{0} - [%X{requestId}] %m%n</pattern>
        </encoder>
    </appender>
    
    
    <property name="LOG_FILE" value="sb-app-cde_integration-batch" />
   
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOGDIR}/${LOG_FILE}.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- rollover daily -->
            <FileNamePattern>${LOGDIR}/${LOG_FILE}.%d{yyyy-MM-dd}.log.gz</FileNamePattern>
            <!-- keep 30 days' worth of history -->
            <MaxHistory>30</MaxHistory>
        </rollingPolicy>
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <Pattern>%date [%X{bpsRequestId}][%thread] %-5level %logger{36} - %msg%n</Pattern>
        </encoder>
    </appender>
     <!-- ===================================================================== -->
    <!-- cip_error_alerts.log (in error_alerts directory)                      -->
    <!-- The strategy for this log is different from other logs                -->
    <!-- This is because Rogers (TCS) monitor this log                         -->
    <!-- 1. The PatternLayout is different (%-5p %d [%t] %c: %m%n)             -->
    <!-- 2. The rollover policy is size based: 20M to a max of 5 backup files  -->
    <!-- The backup files are post fixed .1 through .5 with .1 being the oldest -->
    <!-- 3. Backup files are not zipped (so 120M of files is the max size)     -->
    <!-- ===================================================================== -->
    <appender name="file_error_alert" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/pkg/error_alerts/cip_error_alerts.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <fileNamePattern>/pkg/error_alerts/cip_error_alerts.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <maxFileSize>20MB</maxFileSize>
            <maxHistory>5</maxHistory>
            <totalSizeCap>120MB</totalSizeCap>
        </rollingPolicy>
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <Pattern>%-5p %d [%-25t] %c : [%X{requestId}] %m%n</Pattern>
        </encoder>
    </appender>
    
    
    <root level="INFO">
    </root>
    <logger name="com.rogers" level="INFO">
        <appender-ref ref="FILE"/>
    </logger>
    
    <logger name="CIP_ALERT" level="INFO">
        <appender-ref ref="file_error_alert"/>
    </logger>
     <logger name="com.rogers" level="INFO">
        <appender-ref ref="CONSOLE"/>
    </logger>
    
    <!-- <logger name="com.rogers" level="TRACE">
        <appender-ref ref="FILE" />
    </logger>
    
    <root level="TRACE"></root>
    <logger name="com.rogers" level="DEBUG">
        <appender-ref ref="FILE" />
    </logger> -->
</configuration>