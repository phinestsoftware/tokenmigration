FROM .JFROG_MIRROR_REPO./ubi8/ubi-minimal
USER root
RUN microdnf update --nodocs \ 
  && microdnf install java-17-openjdk-headless --nodocs \
  && microdnf install shadow-utils \
  && microdnf clean all
RUN groupadd -g 1001 appuser && \
    useradd -r -u 1001 -g appuser appuser
COPY /server/target/*.jar /rogers/
RUN chown -R appuser.appuser /rogers
#RUN chown -R appuser.appuser /home/jboss/
WORKDIR /rogers
USER appuser
EXPOSE 8080/tcp
ENTRYPOINT java -Xmx2g -Dfile.encoding=UTF-8  -jar /rogers/.JAR_NAME.-1.0.1-SNAPSHOT.jar
